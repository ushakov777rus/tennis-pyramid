-- üöÄ –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ –¥–ª—è –∫—Ä—É–≥–æ–≤—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤
CREATE OR REPLACE FUNCTION tournaments_set_round_robin_regulation()
RETURNS trigger LANGUAGE plpgsql AS
$$
BEGIN
  IF NEW.format = 'round_robin'
     AND (NEW.regulation IS NULL OR NEW.regulation = '') THEN
    NEW.regulation := $reg$
# –ü–æ–ª–æ–∂–µ–Ω–∏–µ ¬´–ö—Ä—É–≥–æ–≤–æ–π —Ç—É—Ä–Ω–∏—Ä¬ª
–¢—É—Ä–Ω–∏—Ä –ø–æ —Ç–µ–Ω–Ω–∏—Å—É ¬´–ö—Ä—É–≥–æ–≤–æ–π¬ª –≤ –æ–¥–∏–Ω–æ—á–Ω–æ–º —Ä–∞–∑—Ä—è–¥–µ.

## –¶–µ–ª–∏
- –ü—Ä–æ–≤–µ—Å—Ç–∏ —Å–µ—Ä–∏—é –∏–≥—Ä –ø–æ –∫—Ä—É–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ, –≥–¥–µ –∫–∞–∂–¥—ã–π –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥—ã–º.
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–∏–ª—å–Ω–µ–π—à–µ–≥–æ –ø–æ –∏—Ç–æ–≥–∞–º –≤—Å–µ—Ö —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö –º–∞—Ç—á–µ–π.

## –£—á–∞—Å—Ç–∏–µ
- –ö —É—á–∞—Å—Ç–∏—é –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Å–µ –∂–µ–ª–∞—é—â–∏–µ –∏–≥—Ä–æ–∫–∏.
- –°—Ç–∞—Ä—Ç–æ–≤—ã–π –≤–∑–Ω–æ—Å –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω.
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç—É—Ä–Ω–∏—Ä–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º–∏.
- –°—Ä–æ–∫–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.

## –§–æ—Ä–º–∞—Ç —Ç—É—Ä–Ω–∏—Ä–∞
- –ö–∞–∂–¥—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ –∏–≥—Ä–∞–µ—Ç –º–∞—Ç—á —Å –∫–∞–∂–¥—ã–º —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–º.
- –ò—Ç–æ–≥–æ–≤–æ–µ –º–µ—Å—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è:
  1. –ü–æ –Ω–∞–∏–±–æ–ª—å—à–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö —Å–µ—Ç–æ–≤.
  2. –ü—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ ‚Äî –ø–æ —Ä–∞–∑–Ω–∏—Ü–µ –≥–µ–π–º–æ–≤.
  3. –ï—Å–ª–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚Äî –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –ª–∏—á–Ω–æ–π –≤—Å—Ç—Ä–µ—á–∏.

## –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–∞—Ç—á–µ–π
- –í—Ä–µ–º—è –∏ –¥–∞—Ç–∞ –º–∞—Ç—á–∞ —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏.
- –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è ‚Äî –ø–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (–∞—Ä–µ–Ω–¥–∞ –¥–µ–ª–∏—Ç—Å—è –ø–æ—Ä–æ–≤–Ω—É).
- –ú–∞—Ç—á–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –ø–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ü—Ä–∞–≤–∏–ª–∞–º —Ç–µ–Ω–Ω–∏—Å–∞.
- –ü–æ—Å–ª–µ –º–∞—Ç—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–æ–±—â–∞–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—å (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—á–µ—Ç–∞ –ø–æ —Å–µ—Ç–∞–º –∏ –≥–µ–π–º–∞–º).

## –ò—Ç–æ–≥
- –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–º —Ç—É—Ä–Ω–∏—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–≥—Ä–æ–∫, –∏–º–µ—é—â–∏–π –Ω–∞–∏–±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö —Å–µ—Ç–æ–≤.
- –ü—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ —Å–µ—Ç–æ–≤ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–∞–∑–Ω–∏—Ü–∞ –≥–µ–π–º–æ–≤.
- –ü—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ –∏ –ø–æ –≥–µ–π–º–∞–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –ª–∏—á–Ω–æ–π –≤—Å—Ç—Ä–µ—á–µ.
$reg$;
  END IF;

  RETURN NEW;
END;
$$;

DROP TRIGGER IF EXISTS trg_tournaments_round_robin_regulation ON tournaments;

CREATE TRIGGER trg_tournaments_round_robin_regulation
BEFORE INSERT ON tournaments
FOR EACH ROW
EXECUTE FUNCTION tournaments_set_round_robin_regulation();


-- üöÄ –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ –¥–ª—è –û–õ–ò–ú–ü–ò–ô–ö–ò (single_elimination)
CREATE OR REPLACE FUNCTION tournaments_set_single_elimination_regulation()
RETURNS trigger LANGUAGE plpgsql AS
$$
BEGIN
  IF NEW.format = 'single_elimination'
     AND (NEW.regulation IS NULL OR NEW.regulation = '') THEN
    NEW.regulation := $reg$
# –ü–æ–ª–æ–∂–µ–Ω–∏–µ ¬´–û–ª–∏–º–ø–∏–π–∫–∞¬ª
–¢—É—Ä–Ω–∏—Ä –ø–æ —Ç–µ–Ω–Ω–∏—Å—É ¬´–û–ª–∏–º–ø–∏–π–∫–∞¬ª –≤ –æ–¥–∏–Ω–æ—á–Ω–æ–º —Ä–∞–∑—Ä—è–¥–µ.

## –¶–µ–ª–∏
- –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç—É—Ä–Ω–∏—Ä –ø–æ –æ–ª–∏–º–ø–∏–π—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–µ –≤—ã–±—ã–≤–∞–Ω–∏—è.
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –ø–æ –∏—Ç–æ–≥–∞–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –º–∞—Ç—á–∞.

## –£—á–∞—Å—Ç–∏–µ
- –ö —É—á–∞—Å—Ç–∏—é –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Å–µ –∂–µ–ª–∞—é—â–∏–µ –∏–≥—Ä–æ–∫–∏.
- –°—Ç–∞—Ä—Ç–æ–≤—ã–π –≤–∑–Ω–æ—Å –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω.
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç—É—Ä–Ω–∏—Ä–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º–∏.
- –°—Ä–æ–∫–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.

## –§–æ—Ä–º–∞—Ç —Ç—É—Ä–Ω–∏—Ä–∞
- –°–µ—Ç–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ 2^n —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤; –ø—Ä–∏ ¬´–Ω–µ–ø–æ–ª–Ω–æ–π¬ª —Å–µ—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ—Å–µ–≤—ã –∏/–∏–ª–∏ byes.
- –ü–æ—Ä–∞–∂–µ–Ω–∏–µ –≤–µ–¥–µ—Ç –∫ –≤—ã–±—ã–≤–∞–Ω–∏—é –∏–∑ —Ç—É—Ä–Ω–∏—Ä–∞; –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥.
- –ü–æ—Å–µ–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º.
- –ú–µ—Å—Ç–∞ 3‚Äî4 –º–æ–≥—É—Ç –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã:
  1. –õ–∏—á–Ω—ã–º ¬´–º–∞—Ç—á–µ–º –∑–∞ 3 –º–µ—Å—Ç–æ¬ª, –ª–∏–±–æ
  2. –°–æ–≤–º–µ—Å—Ç–Ω—ã–º —Ç—Ä–µ—Ç—å–∏–º –º–µ—Å—Ç–æ–º ‚Äî –ø–æ —Ä–µ—à–µ–Ω–∏—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞.

## –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–∞—Ç—á–µ–π
- –í—Ä–µ–º—è –∏ –¥–∞—Ç–∞ –º–∞—Ç—á–∞ —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ (–ø—Ä–∏ —Å–ø–æ—Ä–µ ‚Äî –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É).
- –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è ‚Äî –ø–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (–∞—Ä–µ–Ω–¥–∞ –¥–µ–ª–∏—Ç—Å—è –ø–æ—Ä–æ–≤–Ω—É).
- –ú–∞—Ç—á–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –ø–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ü—Ä–∞–≤–∏–ª–∞–º —Ç–µ–Ω–Ω–∏—Å–∞.
- –†–∞–∑–º–∏–Ω–∫–∞: –Ω–µ –±–æ–ª–µ–µ 10 –º–∏–Ω—É—Ç.
- –ï—Å–ª–∏ –≤—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã –∏—Å—Ç–µ–∫–ª–æ –∏ –º–∞—Ç—á –Ω–µ –æ–∫–æ–Ω—á–µ–Ω ‚Äî –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏–≥—Ä–æ–∫, –≤—ã–∏–≥—Ä–∞–≤—à–∏–π –±–æ–ª—å—à–µ –≥–µ–π–º–æ–≤ –Ω–∞ –º–æ–º–µ–Ω—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.
- –ü–æ—Å–ª–µ –º–∞—Ç—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–æ–±—â–∞–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—å (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—á–µ—Ç–∞ –ø–æ —Å–µ—Ç–∞–º –∏ –≥–µ–π–º–∞–º).

## –ò—Ç–æ–≥
- –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–º —Ç—É—Ä–Ω–∏—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–≥—Ä–æ–∫, –≤—ã–∏–≥—Ä–∞–≤—à–∏–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –º–∞—Ç—á.
- –ò—Ç–æ–≥–æ–≤–∞—è —Å–µ—Ç–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–µ –º–µ—Å—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
$reg$;
  END IF;

  RETURN NEW;
END;
$$;

DROP TRIGGER IF EXISTS trg_tournaments_single_elimination_regulation ON tournaments;

CREATE TRIGGER trg_tournaments_single_elimination_regulation
BEFORE INSERT ON tournaments
FOR EACH ROW
EXECUTE FUNCTION tournaments_set_single_elimination_regulation();


-- üöÄ –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ –¥–ª—è –î–í–û–ô–ù–û–ô –û–õ–ò–ú–ü–ò–ô–ö–ò (double_elimination)
CREATE OR REPLACE FUNCTION tournaments_set_double_elimination_regulation()
RETURNS trigger LANGUAGE plpgsql AS
$$
BEGIN
  IF NEW.format = 'double_elimination'
     AND (NEW.regulation IS NULL OR NEW.regulation = '') THEN
    NEW.regulation := $reg$
# –ü–æ–ª–æ–∂–µ–Ω–∏–µ ¬´–î–≤–æ–π–Ω–∞—è –æ–ª–∏–º–ø–∏–π–∫–∞¬ª
–¢—É—Ä–Ω–∏—Ä –ø–æ —Ç–µ–Ω–Ω–∏—Å—É ¬´–î–≤–æ–π–Ω–∞—è –æ–ª–∏–º–ø–∏–π–∫–∞¬ª –≤ –æ–¥–∏–Ω–æ—á–Ω–æ–º —Ä–∞–∑—Ä—è–¥–µ.

## –¶–µ–ª–∏
- –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç—É—Ä–Ω–∏—Ä –ø–æ —Å–∏—Å—Ç–µ–º–µ double elimination (–≤—ã–±—ã–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –¥–≤—É—Ö –ø–æ—Ä–∞–∂–µ–Ω–∏–π).
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –ø–æ –∏—Ç–æ–≥–∞–º –≥—Ä–∞–Ω–¥-—Ñ–∏–Ω–∞–ª–∞.

## –£—á–∞—Å—Ç–∏–µ
- –ö —É—á–∞—Å—Ç–∏—é –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Å–µ –∂–µ–ª–∞—é—â–∏–µ –∏–≥—Ä–æ–∫–∏.
- –°—Ç–∞—Ä—Ç–æ–≤—ã–π –≤–∑–Ω–æ—Å –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω.
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç—É—Ä–Ω–∏—Ä–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º–∏.
- –°—Ä–æ–∫–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.

## –§–æ—Ä–º–∞—Ç —Ç—É—Ä–Ω–∏—Ä–∞
- –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Å—Ç–∞—Ä—Ç—É—é—Ç –≤ —Å–µ—Ç–∫–µ –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–π (Winners).
- –ü–æ—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–µ—Ç–∫–µ –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∏–≥—Ä–æ–∫–∞ –≤ —Å–µ—Ç–∫—É –ü—Ä–æ–∏–≥—Ä–∞–≤—à–∏—Ö (Losers).
- –í—Ç–æ—Ä–æ–µ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤—ã–±—ã–≤–∞–Ω–∏—é –∏–∑ —Ç—É—Ä–Ω–∏—Ä–∞.
- –ì—Ä–∞–Ω–¥-—Ñ–∏–Ω–∞–ª:
  1. –ò–≥—Ä–æ–∫ –∏–∑ Winners –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Å –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º Losers.
  2. –ü–æ —Ä–µ—à–µ–Ω–∏—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞ –≤–æ–∑–º–æ–∂–µ–Ω —Ñ–æ—Ä–º–∞—Ç ¬´reset¬ª: —É—á–∞—Å—Ç–Ω–∏–∫—É –∏–∑ Losers —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–∏–≥—Ä–∞—Ç—å –¥–≤–∞ –º–∞—Ç—á–∞ –ø–æ–¥—Ä—è–¥ –¥–ª—è –æ–±—â–µ–≥–æ —Ç–∏—Ç—É–ª–∞.
- –ü–æ—Å–µ–≤ –∏ byes –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º.

## –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–∞—Ç—á–µ–π
- –í—Ä–µ–º—è –∏ –¥–∞—Ç–∞ –º–∞—Ç—á–∞ —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ (–ø—Ä–∏ —Å–ø–æ—Ä–µ ‚Äî –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É).
- –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è ‚Äî –ø–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (–∞—Ä–µ–Ω–¥–∞ –¥–µ–ª–∏—Ç—Å—è –ø–æ—Ä–æ–≤–Ω—É).
- –ú–∞—Ç—á–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –ø–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ü—Ä–∞–≤–∏–ª–∞–º —Ç–µ–Ω–Ω–∏—Å–∞.
- –†–∞–∑–º–∏–Ω–∫–∞: –Ω–µ –±–æ–ª–µ–µ 10 –º–∏–Ω—É—Ç.
- –ï—Å–ª–∏ –≤—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã –∏—Å—Ç–µ–∫–ª–æ –∏ –º–∞—Ç—á –Ω–µ –æ–∫–æ–Ω—á–µ–Ω ‚Äî –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –±–æ–ª—å—à–µ–º—É —á–∏—Å–ª—É –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö –≥–µ–π–º–æ–≤ –Ω–∞ –º–æ–º–µ–Ω—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.
- –ü–æ—Å–ª–µ –º–∞—Ç—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–æ–±—â–∞–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—å (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—á–µ—Ç–∞ –ø–æ —Å–µ—Ç–∞–º –∏ –≥–µ–π–º–∞–º).

## –ò—Ç–æ–≥
- –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–º —Ç—É—Ä–Ω–∏—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–≥—Ä–æ–∫, –≤—ã–∏–≥—Ä–∞–≤—à–∏–π –≥—Ä–∞–Ω–¥-—Ñ–∏–Ω–∞–ª (—Å —É—á–µ—Ç–æ–º –ø—Ä–∞–≤–∏–ª–∞ ¬´reset¬ª, –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è).
- –ò—Ç–æ–≥–æ–≤—ã–µ –º–µ—Å—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ–ª–æ–∂–µ–Ω–∏–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Å–µ—Ç–∫–∞—Ö –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–±—ã–≤–∞–Ω–∏—è.
$reg$;
  END IF;

  RETURN NEW;
END;
$$;

DROP TRIGGER IF EXISTS trg_tournaments_double_elimination_regulation ON tournaments;

CREATE TRIGGER trg_tournaments_double_elimination_regulation
BEFORE INSERT ON tournaments
FOR EACH ROW
EXECUTE FUNCTION tournaments_set_double_elimination_regulation();


-- üöÄ –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ –¥–ª—è –ì–†–£–ü–ü–´ + –ü–õ–ï–ô-–û–§–§ (groups_playoff)
CREATE OR REPLACE FUNCTION tournaments_set_groups_playoff_regulation()
RETURNS trigger LANGUAGE plpgsql AS
$$
BEGIN
  IF NEW.format = 'groups_playoff'
     AND (NEW.regulation IS NULL OR NEW.regulation = '') THEN
    NEW.regulation := $reg$
# –ü–æ–ª–æ–∂–µ–Ω–∏–µ ¬´–ì—Ä—É–ø–ø—ã + –ü–ª–µ–π-–æ—Ñ—Ñ¬ª
–¢—É—Ä–Ω–∏—Ä –ø–æ —Ç–µ–Ω–Ω–∏—Å—É ¬´–ì—Ä—É–ø–ø—ã + –ü–ª–µ–π-–æ—Ñ—Ñ¬ª –≤ –æ–¥–∏–Ω–æ—á–Ω–æ–º —Ä–∞–∑—Ä—è–¥–µ.

## –¶–µ–ª–∏
- –ü—Ä–æ–≤–µ—Å—Ç–∏ –≥—Ä—É–ø–ø–æ–≤–æ–π —ç—Ç–∞–ø –ø–æ –∫—Ä—É–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –ø–ª–µ–π-–æ—Ñ—Ñ.
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –ø–æ –∏—Ç–æ–≥–∞–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –º–∞—Ç—á–∞.

## –£—á–∞—Å—Ç–∏–µ
- –ö —É—á–∞—Å—Ç–∏—é –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Å–µ –∂–µ–ª–∞—é—â–∏–µ –∏–≥—Ä–æ–∫–∏.
- –°—Ç–∞—Ä—Ç–æ–≤—ã–π –≤–∑–Ω–æ—Å –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω.
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç—É—Ä–Ω–∏—Ä–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º–∏.
- –°—Ä–æ–∫–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.

## –§–æ—Ä–º–∞—Ç —Ç—É—Ä–Ω–∏—Ä–∞
- –ì—Ä—É–ø–ø–æ–≤–æ–π —ç—Ç–∞–ø:
  - –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –≥—Ä—É–ø–ø–∞–º; –≤ –≥—Ä—É–ø–ø–µ –∫–∞–∂–¥—ã–π –∏–≥—Ä–∞–µ—Ç —Å –∫–∞–∂–¥—ã–º –æ–¥–∏–Ω –º–∞—Ç—á.
  - –¢–∞–±–ª–∏—Ü–∞ –≥—Ä—É–ø–ø—ã —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è:
    1. –ü–æ –Ω–∞–∏–±–æ–ª—å—à–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö —Å–µ—Ç–æ–≤.
    2. –ü—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ ‚Äî –ø–æ —Ä–∞–∑–Ω–∏—Ü–µ –≥–µ–π–º–æ–≤ (–≤—ã–∏–≥—Ä–∞–Ω–Ω—ã–µ –º–∏–Ω—É—Å –ø—Ä–æ–∏–≥—Ä–∞–Ω–Ω—ã–µ).
    3. –ü—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ ‚Äî –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –ª–∏—á–Ω–æ–π –≤—Å—Ç—Ä–µ—á–∏.
- –í—ã—Ö–æ–¥ –≤ –ø–ª–µ–π-–æ—Ñ—Ñ:
  - –ò–∑ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã –≤ –ø–ª–µ–π-–æ—Ñ—Ñ –≤—ã—Ö–æ–¥—è—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—É (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä).
  - –ü–æ—Å–µ–≤ –ø–ª–µ–π-–æ—Ñ—Ñ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø–æ –º–µ—Å—Ç–∞–º –≤ –≥—Ä—É–ø–ø–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1-–µ –º–µ—Å—Ç–æ –≥—Ä—É–ø–ø—ã A vs 2-–µ –º–µ—Å—Ç–æ –≥—Ä—É–ø–ø—ã B –∏ —Ç. –¥.).
- –ü–ª–µ–π-–æ—Ñ—Ñ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –ø–æ –æ–ª–∏–º–ø–∏–π—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–µ –≤—ã–±—ã–≤–∞–Ω–∏—è –¥–æ —Ñ–∏–Ω–∞–ª–∞.

## –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–∞—Ç—á–µ–π
- –í—Ä–µ–º—è –∏ –¥–∞—Ç–∞ –º–∞—Ç—á–∞ —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ (–ø—Ä–∏ —Å–ø–æ—Ä–µ ‚Äî –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É).
- –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è ‚Äî –ø–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (–∞—Ä–µ–Ω–¥–∞ –¥–µ–ª–∏—Ç—Å—è –ø–æ—Ä–æ–≤–Ω—É).
- –ú–∞—Ç—á–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –ø–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ü—Ä–∞–≤–∏–ª–∞–º —Ç–µ–Ω–Ω–∏—Å–∞.
- –†–∞–∑–º–∏–Ω–∫–∞: –Ω–µ –±–æ–ª–µ–µ 10 –º–∏–Ω—É—Ç.
- –ï—Å–ª–∏ –≤—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã –∏—Å—Ç–µ–∫–ª–æ –∏ –º–∞—Ç—á –Ω–µ –æ–∫–æ–Ω—á–µ–Ω ‚Äî –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –±–æ–ª—å—à–µ–º—É —á–∏—Å–ª—É –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö –≥–µ–π–º–æ–≤ –Ω–∞ –º–æ–º–µ–Ω—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.
- –ü–æ—Å–ª–µ –º–∞—Ç—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–æ–±—â–∞–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—å (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—á–µ—Ç–∞ –ø–æ —Å–µ—Ç–∞–º –∏ –≥–µ–π–º–∞–º).

## –ò—Ç–æ–≥
- –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–º —Ç—É—Ä–Ω–∏—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–≥—Ä–æ–∫, –≤—ã–∏–≥—Ä–∞–≤—à–∏–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –º–∞—Ç—á –ø–ª–µ–π-–æ—Ñ—Ñ.
- –ò—Ç–æ–≥–æ–≤—ã–µ –º–µ—Å—Ç–∞ –≤ –≥—Ä—É–ø–ø–∞—Ö –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º –≥—Ä—É–ø–ø—ã; –º–µ—Å—Ç–∞ –≤ –ø–ª–µ–π-–æ—Ñ—Ñ ‚Äî –ø–æ –ø–æ–ª–æ–∂–µ–Ω–∏—é –≤ —Å–µ—Ç–∫–µ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–±—ã–≤–∞–Ω–∏—è.
$reg$;
  END IF;

  RETURN NEW;
END;
$$;

DROP TRIGGER IF EXISTS trg_tournaments_groups_playoff_regulation ON tournaments;

CREATE TRIGGER trg_tournaments_groups_playoff_regulation
BEFORE INSERT ON tournaments
FOR EACH ROW
EXECUTE FUNCTION tournaments_set_groups_playoff_regulation();


-- üöÄ –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ –¥–ª—è –®–í–ï–ô–¶–ê–†–ö–ò (swiss)
CREATE OR REPLACE FUNCTION tournaments_set_swiss_regulation()
RETURNS trigger LANGUAGE plpgsql AS
$$
BEGIN
  IF NEW.format = 'swiss'
     AND (NEW.regulation IS NULL OR NEW.regulation = '') THEN
    NEW.regulation := $reg$
# –ü–æ–ª–æ–∂–µ–Ω–∏–µ ¬´–®–≤–µ–π—Ü–∞—Ä—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞¬ª
–¢—É—Ä–Ω–∏—Ä –ø–æ —Ç–µ–Ω–Ω–∏—Å—É ¬´–®–≤–µ–π—Ü–∞—Ä–∫–∞¬ª –≤ –æ–¥–∏–Ω–æ—á–Ω–æ–º —Ä–∞–∑—Ä—è–¥–µ.

## –¶–µ–ª–∏
- –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç—É—Ä–Ω–∏—Ä –ø–æ —à–≤–µ–π—Ü–∞—Ä—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–µ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —á–∏—Å–ª–æ–º —Ç—É—Ä–æ–≤.
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –ø–æ –∏—Ç–æ–≥–∞–º —Å—É–º–º–∞—Ä–Ω—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π.

## –£—á–∞—Å—Ç–∏–µ
- –ö —É—á–∞—Å—Ç–∏—é –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Å–µ –∂–µ–ª–∞—é—â–∏–µ –∏–≥—Ä–æ–∫–∏.
- –°—Ç–∞—Ä—Ç–æ–≤—ã–π –≤–∑–Ω–æ—Å –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω.
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç—É—Ä–Ω–∏—Ä–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º–∏.
- –°—Ä–æ–∫–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∏ —á–∏—Å–ª–æ —Ç—É—Ä–æ–≤ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.

## –§–æ—Ä–º–∞—Ç —Ç—É—Ä–Ω–∏—Ä–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—É—Ä–æ–≤ –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º –¥–æ —Å—Ç–∞—Ä—Ç–∞.
- –ü–∞—Ä–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏ –≤ –∫–∞–∂–¥–æ–º —Ç—É—Ä–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è —Å—Ä–µ–¥–∏ –∏–≥—Ä–æ–∫–æ–≤ —Å –±–ª–∏–∑–∫–∏–º–∏ —Ç–µ–∫—É—â–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏:
  1. –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö —Å–µ—Ç–æ–≤.
  2. –ü—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ ‚Äî —Ä–∞–∑–Ω–∏—Ü–∞ –≥–µ–π–º–æ–≤ (–≤—ã–∏–≥—Ä–∞–Ω–Ω—ã–µ –º–∏–Ω—É—Å –ø—Ä–æ–∏–≥—Ä–∞–Ω–Ω—ã–µ).
- –ü–æ–≤—Ç–æ—Ä—ã –≤—Å—Ç—Ä–µ—á –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è; –ø—Ä–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ‚Äî –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ —Ä–µ—à–µ–Ω–∏—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞.
- –¢—É—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å—ã–≥—Ä–∞–Ω–Ω—ã–º –ø–æ—Å–ª–µ —Ñ–∏–∫—Å–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç—É—Ä–∞.

## –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–∞—Ç—á–µ–π
- –í—Ä–µ–º—è –∏ –¥–∞—Ç–∞ –º–∞—Ç—á–∞ —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ (–ø—Ä–∏ —Å–ø–æ—Ä–µ ‚Äî –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É).
- –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è ‚Äî –ø–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (–∞—Ä–µ–Ω–¥–∞ –¥–µ–ª–∏—Ç—Å—è –ø–æ—Ä–æ–≤–Ω—É).
- –ú–∞—Ç—á–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –ø–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ü—Ä–∞–≤–∏–ª–∞–º —Ç–µ–Ω–Ω–∏—Å–∞.
- –†–∞–∑–º–∏–Ω–∫–∞: –Ω–µ –±–æ–ª–µ–µ 10 –º–∏–Ω—É—Ç.
- –ï—Å–ª–∏ –≤—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã –∏—Å—Ç–µ–∫–ª–æ –∏ –º–∞—Ç—á –Ω–µ –æ–∫–æ–Ω—á–µ–Ω ‚Äî –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –±–æ–ª—å—à–µ–º—É —á–∏—Å–ª—É –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö –≥–µ–π–º–æ–≤ –Ω–∞ –º–æ–º–µ–Ω—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.
- –ü–æ—Å–ª–µ –º–∞—Ç—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–æ–±—â–∞–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—å (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—á–µ—Ç–∞ –ø–æ —Å–µ—Ç–∞–º –∏ –≥–µ–π–º–∞–º).

## –ò—Ç–æ–≥
- –ò—Ç–æ–≥–æ–≤–æ–µ –º–µ—Å—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è:
  1. –ü–æ –Ω–∞–∏–±–æ–ª—å—à–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö —Å–µ—Ç–æ–≤ —Å—É–º–º–∞—Ä–Ω–æ –∑–∞ –≤—Å–µ —Ç—É—Ä—ã.
  2. –ü—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ ‚Äî –ø–æ —Ä–∞–∑–Ω–∏—Ü–µ –≥–µ–π–º–æ–≤.
  3. –ï—Å–ª–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚Äî –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –ª–∏—á–Ω–æ–π –≤—Å—Ç—Ä–µ—á–∏ (–µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞), –¥–∞–ª–µ–µ –ø–æ –∂—Ä–µ–±–∏—é.
- –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–º —Ç—É—Ä–Ω–∏—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É—á–∞—Å—Ç–Ω–∏–∫, –∑–∞–Ω—è–≤—à–∏–π 1-–µ –º–µ—Å—Ç–æ –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º.
$reg$;
  END IF;

  RETURN NEW;
END;
$$;

DROP TRIGGER IF EXISTS trg_tournaments_swiss_regulation ON tournaments;

CREATE TRIGGER trg_tournaments_swiss_regulation
BEFORE INSERT ON tournaments
FOR EACH ROW
EXECUTE FUNCTION tournaments_set_swiss_regulation();
